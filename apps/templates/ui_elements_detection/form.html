{% load i18n %}

<form id="form" method="POST" enctype="multipart/form-data">{% csrf_token %}
  <h6 class="heading-small text-muted mb-4">{% blocktranslate %}General information{% endblocktranslate %}</h6>
  <div class="pl-lg-2">
    <div class="col-12">
      <div class="form-group">
        <label class="form-control-label" for="input-title">{% blocktranslate %}Title {% endblocktranslate %}<b class="text-red">*</b></label>
        {{ forms.ui_elements_detection.title }}
        <div class="form-validation">{{ forms.ui_elements_detection.title.errors }}</div>
      </div>
    </div>
    <div class="col-12">
      <div class="form-group">
        <label class="form-control-label" for="input-title">{% blocktranslate %}Technique {% endblocktranslate %}<b class="text-red">*</b></label>
        {{ forms.ui_elements_detection.type }}
        <div class="form-validation">{{ forms.ui_elements_detection.type.errors }}</div>
      </div>
    </div>
    <div class="col-12">
      <div class="form-group">
        <label class="form-control-label" for="input-title">{% blocktranslate %}Classification Model{% endblocktranslate %}</label>
        {{ forms.ui_elements_classification.model }}
        <div class="form-validation">{{ forms.ui_elements_classification.model.errors }}</div>
      </div>
    </div>
  </div>
  <hr>
  <h6 class="heading-small text-muted mb-4">{% blocktranslate %}Preload Execution Results{% endblocktranslate %}</h6>
  <div class="col-12">
    <div class="form-group">
      <input type="checkbox" id="preloaded" name="preloaded">
      <label class="form-control-label" for="preloaded">{% blocktranslate %}Preload Execution Results .zip{% endblocktranslate %}</label>
    </div>
    <div class="form-group">
      <input type="file" id="uploaded_execution" name="uploaded_execution" accept=".zip" disabled>
      <label class="form-control-label" for="uploaded_execution">{% blocktranslate %}.zip structure ->{% endblocktranslate %}</label>
      <button onclick="alert('instrucciones de la estructura del archivo')">?</button>
    </div>
  </div>
  <hr>
  <h6 class="heading-small text-muted mb-4">{% blocktranslate %}Configuration{% endblocktranslate %}</h6>
  <div class="pl-lg-2">
    <div class="col-12">
      <div class="form-group">
        {{ forms.ui_elements_detection.ocr }}
        <label class="form-control-label" for="input-title">{% blocktranslate %}Apply OCR{% endblocktranslate %}</label>
        <div class="form-validation">{{ forms.ui_elements_detection.ocr.errors }}</div>
      </div>
    </div>
    <div class="col-12">
      <div class="form-group">
        <label class="form-control-label" for="input-title">{% blocktranslate %}Additional Configurations{% endblocktranslate %}</label>
        {{ forms.ui_elements_detection.configurations }}
        <div class="form-validation">{{ forms.ui_elements_detection.configurations.errors }}</div>
      </div>
    </div>
  </div>
  <button class="btn btn-success" style="float: right;" type="submit" value="submit">
    <i class="fas fa-save"></i>
    Save
  </button>
</form>
<!-- Specific JS goes HERE --> 
{% block javascripts %}
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const technique = document.getElementById('id_type')
      const preloaded = document.getElementById('preloaded')
      const uploaded_execution = document.getElementById('uploaded_execution')
      const titleInput = document.querySelector('#input-title');
      const formInputs = document.querySelectorAll('#form input, #form select');

      if (technique.value == 'screen2som') {
        document.getElementById('id_model').disabled = true;
      }

      preloaded.addEventListener('change', () => {
        uploaded_execution.disabled = !preloaded.checked
        formInputs.forEach(input => {
          if (input !== preloaded && input !== uploaded_execution && input !== titleInput) {
            input.disabled = preloaded.checked;
          }
        });
      })

      document.getElementById('form').onsubmit = function() {
        document.getElementById('id_model').disabled = false;
      }
    })
  </script>
{% endblock javascripts %}